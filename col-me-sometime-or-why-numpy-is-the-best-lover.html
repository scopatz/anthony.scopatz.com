<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Col Me Sometime (or Why NumPy is the Best Lover)</title>
  <meta name="author" content="Anthony Scopatz">

    <link href="http://anthony.scopatz.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
        title="Anthony Scopatz Atom Feed" />
      <link href="http://anthony.scopatz.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
        title="Anthony Scopatz RSS Feed" />
  
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="http://anthony.scopatz.com/favicon.png" rel="icon">
  <link href="http://anthony.scopatz.com/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="http://anthony.scopatz.com/theme/js/modernizr-2.0.js"></script>
  <script src="http://anthony.scopatz.com/theme/js/ender.js"></script>
  <script src="http://anthony.scopatz.com/theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
    </head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="http://anthony.scopatz.com/">Anthony Scopatz</a></h1>
      <h2>I think, therefore I amino acid.</h2>
  </hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <!--
  <li><a href="http://anthony.scopatz.com/feeds/all.atom.xml" rel="subscribe-rss">RSS</a></li>
  -->
    <li><a href="http://anthony.scopatz.com/feeds/all.rss.xml" rel="subscribe-rss">RSS</a></li>
  </ul>

<!-- TODO: add search here
<form action="" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:http://anthony.scopatz.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
-->

<ul class="main-navigation">
      <li><a href="http://anthony.scopatz.com/category/missives.html">Missives</a></li>
      <li><a href="http://anthony.scopatz.com/archives.html">Archives</a></li>
      <li><a href="http://anthony.scopatz.com/self.html">Self</a></li>
      <li><a href="http://anthony.scopatz.com/about.html">About</a></li>
      <li><a href="http://anthony.scopatz.com/contact.html">Contact</a></li>
            <!-- TODO: add categories here? -->
  </ul></nav>
  <div id="main">
    <div id="content">
      <div>
  <article class="hentry" role="article">
    <header>
          <h1 class="entry-title">Col Me Sometime (or Why NumPy is the Best Lover)</h1>
          <p class="meta"><time datetime="2010-11-25T13:26:00" pubdate>Thu 25 November 2010</time></p>
</header>

  <div class="entry-content"><p>Whether you know, or care, most database software has hard coded limits
on the number of columns that you can store in a single&nbsp;table.</p>
<p>Often, if you hit this limit for some reason, it indicates that &#8216;you are
doing it wrong.&#8217; &nbsp;However, this is not always the&nbsp;case.</p>
<p>For instance, say you want to store some information that is a function
of isotope. &nbsp;Well, exist some 3000+ nuclides that are known to exist in
nature. &nbsp;If you want to store this data in a single table and your
database allows 4096 columns per table, you are in luck! &nbsp;However, if
you go down by a single power of two, there are only 2048 columns per
table and you are in&nbsp;trouble.</p>
<p>Below is a list of different table structures and their implicit table&nbsp;limits:</p>
<ul class="simple">
<li><a class="reference external" href="http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html">MySQL 5</a>:&nbsp;4,096</li>
<li><a class="reference external" href="http://msdn.microsoft.com/en-us/library/ms143432.aspx"><span class="caps">MSSQL</span></a>:&nbsp;1,024</li>
<li><a class="reference external" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/limits003.htm">Oracle</a>:&nbsp;1,000</li>
<li><a class="reference external" href="http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx">Excel 2003</a>:&nbsp;256</li>
<li><a class="reference external" href="http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx">Excel 2007</a>:&nbsp;16,384</li>
<li><a class="reference external" href="http://www.hdfgroup.org/hdf5-quest.html#dtcmpmaxfld"><span class="caps">HDF5</span></a>:&nbsp;~1,260</li>
<li>NumPy:&nbsp;+inf</li>
</ul>
<p>That&#8217;s right; NumPy structured (or record) arrays seem to allow as many
columns as you can fit into memory! &nbsp;Below is some code that
demonstrates this. &nbsp;I tested it up to a million columns, but I am
certain that it could handle a few more orders of&nbsp;magnitude.</p>
<p>This situation is peculiar since traditional databases are limited by
disk size, not memory, like NumPy. &nbsp;(HDDs, of course, being much larger
than&nbsp;<span class="caps">RAM</span>.)</p>
<div class="section" id="go-to-the-source">
<h2>Go to the&nbsp;Source</h2>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">sample</span><span class="p">,</span> <span class="n">randint</span>
<span class="n">population</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="s">&#39;S&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">rand</span>\<span class="n">_dtype</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="p">[]</span><span class="err">  </span> <span class="err"> </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">dt</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid1</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">d</span><span class="p">))</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">sample</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span> <span class="p">)</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dt</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="n">rand</span>\<span class="n">_dtype</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dt</span><span class="p">)</span>
</pre></div>
</div>
</div>
    <footer>
      <p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Anthony Scopatz</span>
  </span>
  <time datetime="2010-11-25T13:26:00" pubdate>Thu 25 November 2010</time>    <span class="categories">
        <a class="category" href="http://anthony.scopatz.com/tag/table4one.html">table4one</a>
      </span>
  </p>    </footer>
  </article>

    <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
  </div>
      <aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
            <li class="post">
          <a href="http://anthony.scopatz.com/multivariate-veganism.html">Veganism: The Multivariate Right Thing To Do</a>
      </li>
            <li class="post">
          <a href="http://anthony.scopatz.com/inscight-episode-32-code-reproducibility-and-open-source.html">inSCIght Episode 32: Code Reproducibility and Open Source</a>
      </li>
            <li class="post">
          <a href="http://anthony.scopatz.com/projects_by_safe.html">Projects by the Coffeeshops They Remind Me Of</a>
      </li>
            <li class="post">
          <a href="http://anthony.scopatz.com/bootcamp-student-composition-by-domain.html">Bootcamp Student Composition by Domain</a>
      </li>
            <li class="post">
          <a href="http://anthony.scopatz.com/diversity-statement-notes.html">Diversity Statement Notes</a>
      </li>
          </ul>
  </section>
    <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
              <li><a href="http://anthony.scopatz.com/category/missives.html">missives</a></li>
              <li><a href="http://anthony.scopatz.com/category/null.html">null</a></li>
          </ul>
  </section>
   

  <section>
  <h1>Tags</h1>
      <a href="http://anthony.scopatz.com/tag/code.html">code</a>,      <a href="http://anthony.scopatz.com/tag/undermythumb.html">undermythumb</a>,      <a href="http://anthony.scopatz.com/tag/finespecimen.html">finespecimen</a>,      <a href="http://anthony.scopatz.com/tag/butsaliwanaplayarya.html">butsaliwanaplayarya!</a>,      <a href="http://anthony.scopatz.com/tag/abwhofsabab.html">(a||b)whof***s(a||b||a&amp;b)</a>,      <a href="http://anthony.scopatz.com/tag/bothflamingandhot.html">bothflamingandhot</a>,      <a href="http://anthony.scopatz.com/tag/goingtwosiesonapadravya.html">goingtwosiesonapadravya</a>,      <a href="http://anthony.scopatz.com/tag/stark.html">Stark</a>,      <a href="http://anthony.scopatz.com/tag/left-handed.html">Left-Handed</a>,      <a href="http://anthony.scopatz.com/tag/totallydisillusionedwithstraightmalehood.html">totallydisillusionedwithstraightmalehood</a>,      <a href="http://anthony.scopatz.com/tag/northofthewall.html">northofthewall</a>,      <a href="http://anthony.scopatz.com/tag/onatotallyunrelatednote.html">onatotallyunrelatednote</a>,      <a href="http://anthony.scopatz.com/tag/caith.html">caith</a>,      <a href="http://anthony.scopatz.com/tag/southside.html">southside</a>,      <a href="http://anthony.scopatz.com/tag/ifiwasgoingtokillmyselfiwouldnttellyou.html">ifiwasgoingtokillmyselfiwouldn'ttellyou</a>,      <a href="http://anthony.scopatz.com/tag/onedoesnotsimplyjumpingstilitsintomordor.html">onedoesnotsimplyjumpingstilitsintomordor</a>,      <a href="http://anthony.scopatz.com/tag/evilloknarisevil.html">evilloknarisevil</a>,      <a href="http://anthony.scopatz.com/tag/kdlang.html">kdlang</a>,      <a href="http://anthony.scopatz.com/tag/doyouhaveadorsalfin.html">doyouhaveadorsalfin?</a>,      <a href="http://anthony.scopatz.com/tag/paris.html">paris</a>,      <a href="http://anthony.scopatz.com/tag/forgottenfilmfriday.html">forgottenfilmfriday</a>,      <a href="http://anthony.scopatz.com/tag/kernelravego.html">kernelravego!</a>,      <a href="http://anthony.scopatz.com/tag/inscight.html">inscight</a>,      <a href="http://anthony.scopatz.com/tag/notmybrother.html">notmybrother</a>,      <a href="http://anthony.scopatz.com/tag/lolstice.html">lolstice</a>,      <a href="http://anthony.scopatz.com/tag/whatevs-oldladyhat.html">whatevs-oldladyhat</a>,      <a href="http://anthony.scopatz.com/tag/teaching.html">teaching</a>,      <a href="http://anthony.scopatz.com/tag/physor.html">physor</a>,      <a href="http://anthony.scopatz.com/tag/onlyonemanwoulddaregivemetheraspberry.html">onlyonemanwoulddaregivemetheraspberry</a>,      <a href="http://anthony.scopatz.com/tag/hardkour.html">hardkour</a>,      <a href="http://anthony.scopatz.com/tag/iheartvaginas.html">iheartvaginas</a>,      <a href="http://anthony.scopatz.com/tag/coffee.html">coffee</a>,      <a href="http://anthony.scopatz.com/tag/picsoritdidnthappen.html">picsoritdidnthappen</a>,      <a href="http://anthony.scopatz.com/tag/exodus.html">exodus</a>,      <a href="http://anthony.scopatz.com/tag/joinmyharem.html">joinmyharem</a>,      <a href="http://anthony.scopatz.com/tag/ladyjessica.html">ladyjessica</a>,      <a href="http://anthony.scopatz.com/tag/iamclearlynotdoingsomethingright.html">iamclearlynotdoingsomethingright</a>,      <a href="http://anthony.scopatz.com/tag/oldladyhat.html">oldladyhat</a>,      <a href="http://anthony.scopatz.com/tag/ssp.html">ssp</a>,      <a href="http://anthony.scopatz.com/tag/waitireallydolikeit.html">waitireallydolikeit</a>,      <a href="http://anthony.scopatz.com/tag/feyd.html">feyd</a>,      <a href="http://anthony.scopatz.com/tag/enigma.html">enigma</a>,      <a href="http://anthony.scopatz.com/tag/unicorn.html">unicorn</a>,      <a href="http://anthony.scopatz.com/tag/sequoia.html">sequoia</a>,      <a href="http://anthony.scopatz.com/tag/global.html">global</a>,      <a href="http://anthony.scopatz.com/tag/arya.html">Arya</a>,      <a href="http://anthony.scopatz.com/tag/ssp2.html">ssp2</a>,      <a href="http://anthony.scopatz.com/tag/lollipop.html">lollipop</a>,      <a href="http://anthony.scopatz.com/tag/shebecrying.html">shebecrying</a>,      <a href="http://anthony.scopatz.com/tag/argentiniancowboys.html">argentiniancowboys</a>,      <a href="http://anthony.scopatz.com/tag/zomgspaceisradioactive.html">zOMGspaceisradioactive!</a>,      <a href="http://anthony.scopatz.com/tag/table4one.html">table4one</a>,      <a href="http://anthony.scopatz.com/tag/gundamisntfree.html">gundamisn'tfree</a>,      <a href="http://anthony.scopatz.com/tag/relenasbutler.html">relena'sbutler</a>,      <a href="http://anthony.scopatz.com/tag/unlessiaminasutriawhereitispunchandpie.html">unlessiaminasutriawhereitispunchandpie</a>,      <a href="http://anthony.scopatz.com/tag/duncanidaho.html">duncanidaho</a>,      <a href="http://anthony.scopatz.com/tag/peoplechangenawtheydont.html">peoplechangenawtheydont</a>,      <a href="http://anthony.scopatz.com/tag/lawlsadventure.html">lawlsadventure</a>,      <a href="http://anthony.scopatz.com/tag/no-utube.html">no-utube</a>,      <a href="http://anthony.scopatz.com/tag/scipy.html">scipy</a>,      <a href="http://anthony.scopatz.com/tag/ifoughtthelawandthelawanallyrapedme.html">ifoughtthelawandthelawanallyrapedme</a>,      <a href="http://anthony.scopatz.com/tag/5.html">+5</a>,      <a href="http://anthony.scopatz.com/tag/switzerland.html">switzerland</a>,      <a href="http://anthony.scopatz.com/tag/idontlikeitbecauseitispopular.html">idontlikeitbecauseitispopular</a>,      <a href="http://anthony.scopatz.com/tag/alittlebirdtoldme.html">alittlebirdtoldme</a>,      <a href="http://anthony.scopatz.com/tag/syrio-forel.html">Syrio Forel</a>,      <a href="http://anthony.scopatz.com/tag/chc-everywhere.html">chc-everywhere!</a>    </section>

    
    <section>
        <h1>Social</h2>
        <ul>
                    <li><a href="http://anthony.scopatz.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">RSS</a></li>
                            <li><a href="http://anthony.scopatz.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">ATOM</a></li>
                            <li><a href="http://scopatz.com/" target="_blank">Other Website</a></li>
                    <li><a href="https://plus.google.com/u/0/116439624339414215461" target="_blank">Google+</a></li>
                    <li><a href="https://github.com/scopatz" target="_blank">GitHub</a></li>
                    <li><a href="https://bitbucket.org/scopatz" target="_blank">BitBucket</a></li>
                    <li><a href="https://twitter.com/scopatz" target="_blank">Twitter</a></li>
                    <li><a href="http://www.linkedin.com/in/scopatz" target="_blank">LinkedIn</a></li>
                </ul>
    </section>
  </aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; Anthony Scopatz
</p></footer>
  	<script type="text/javascript">
	  var disqus_shortname = 'anthonyscopatz';
                var disqus_identifier = '/col-me-sometime-or-why-numpy-is-the-best-lover.html';
          var disqus_url = 'http://anthony.scopatz.com/col-me-sometime-or-why-numpy-is-the-best-lover.html';
          var disqus_title = 'Col Me Sometime (or Why NumPy is the Best&nbsp;Lover)';
      	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>