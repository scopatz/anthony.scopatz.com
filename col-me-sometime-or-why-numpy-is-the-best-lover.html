<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Col Me Sometime (or Why NumPy is the Best Lover)</title>
  <meta name="author" content="Anthony Scopatz">

    
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="./favicon.png" rel="icon">
  <link href="./theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="./theme/js/modernizr-2.0.js"></script>
  <script src="./theme/js/ender.js"></script>
  <script src="./theme/js/octopress.js" type="text/javascript"></script>

  <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="./">Anthony Scopatz</a></h1>
      <h2>I think, therefore I amino acid.</h2>
  </hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://anthony.scopatz.com/" rel="subscribe-rss">RSS</a></li>
  </ul>

<!-- TODO: add search here
<form action="" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:." />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
-->

<ul class="main-navigation">
      <li><a href="category/missives.html">Missives</a></li>
      <li><a href="archives.html">Archives</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
            <!-- TODO: add categories here? -->
  </ul></nav>
  <div id="main">
    <div id="content">
      <div>
  <article class="hentry" role="article">
    <header>
          <h1 class="entry-title">Col Me Sometime (or Why NumPy is the Best Lover)</h1>
          <p class="meta"><time datetime="2010-11-25T13:26:00" pubdate>Thu 25 November 2010</time></p>
</header>

  <div class="entry-content"><p>Whether you know, or care, most database software has hard coded limits
on the number of columns that you can store in a single&nbsp;table.</p>
<p>Often, if you hit this limit for some reason, it indicates that &#8216;you are
doing it wrong.&#8217; &nbsp;However, this is not always the&nbsp;case.</p>
<p>For instance, say you want to store some information that is a function
of isotope. &nbsp;Well, exist some 3000+ nuclides that are known to exist in
nature. &nbsp;If you want to store this data in a single table and your
database allows 4096 columns per table, you are in luck! &nbsp;However, if
you go down by a single power of two, there are only 2048 columns per
table and you are in&nbsp;trouble.</p>
<p>Below is a list of different table structures and their implicit table&nbsp;limits:</p>
<ul class="simple">
<li><a class="reference external" href="http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html">MySQL 5</a>:&nbsp;4,096</li>
<li><a class="reference external" href="http://msdn.microsoft.com/en-us/library/ms143432.aspx"><span class="caps">MSSQL</span></a>:&nbsp;1,024</li>
<li><a class="reference external" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/limits003.htm">Oracle</a>:&nbsp;1,000</li>
<li><a class="reference external" href="http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx">Excel 2003</a>:&nbsp;256</li>
<li><a class="reference external" href="http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010073849.aspx">Excel 2007</a>:&nbsp;16,384</li>
<li><a class="reference external" href="http://www.hdfgroup.org/hdf5-quest.html#dtcmpmaxfld"><span class="caps">HDF5</span></a>:&nbsp;~1,260</li>
<li>NumPy:&nbsp;+inf</li>
</ul>
<p>That&#8217;s right; NumPy structured (or record) arrays seem to allow as many
columns as you can fit into memory! &nbsp;Below is some code that
demonstrates this. &nbsp;I tested it up to a million columns, but I am
certain that it could handle a few more orders of&nbsp;magnitude.</p>
<p>This situation is peculiar since traditional databases are limited by
disk size, not memory, like NumPy. &nbsp;(HDDs, of course, being much larger
than&nbsp;<span class="caps">RAM</span>.)</p>
<p>&#8211; Go to the Source&nbsp;&#8211;</p>
<p>import numpy as&nbsp;np</p>
<div class="line-block">
<div class="line">import uuid</div>
<div class="line-block">
<div class="line">from random import sample, randint</div>
<div class="line">population = [int, float, &#8216;S&#8217;]</div>
</div>
</div>
<p>def&nbsp;rand_dtype(n):</p>
<div class="line-block">
<div class="line">dt = []&nbsp;&nbsp; &nbsp;for i in xrange(n):</div>
<div class="line-block">
<div class="line">dt.extend( [(str(uuid.uuid1()), np.dtype(d)) for d in</div>
</div>
</div>
<div class="system-message">
<p class="system-message-title">System Message: <span class="caps">WARNING</span>/2 (<tt class="docutils">/home/scopatz/anthony.scopatz.com/content/missives/col-me-sometime-or-why-numpy-is-the-best-lover.rst</tt>, line&nbsp;52)</p>
Line block ends without a blank line.</div>
<p>sample(population, 1)] )
|  dt = np.dtype(dt)
|  return&nbsp;dt</p>
<p>if __name__ ==&nbsp;&#8220;__main__&#8221;:</p>
<div class="line-block">
<div class="line">dt = rand_dtype(1000000)</div>
<div class="line-block">
<div class="line">z = np.zeros(10, dtype=dt)</div>
</div>
</div>
</div>
    <footer>
      <p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Anthony Scopatz</span>
  </span>
  <time datetime="2010-11-25T13:26:00" pubdate>Thu 25 November 2010</time>    <span class="categories">
        <a class="category" href="./tag/table4one.html">table4one</a>
      </span>
  </p>    </footer>
  </article>

    <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
  </div>
      <aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
            <li class="post">
          <a href="./about.html">About</a>
      </li>
            <li class="post">
          <a href="./contact.html">Contact</a>
      </li>
            <li class="post">
          <a href="./scientific-computing-at-aims.html">Scientific Computing at AIMS</a>
      </li>
            <li class="post">
          <a href="./thence-flash-thither-uw.html">Thence FLASH, Thither UW</a>
      </li>
            <li class="post">
          <a href="./the-shining-panda-edition.html">The Shining: Panda Edition</a>
      </li>
          </ul>
  </section>
    <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
              <li><a href="./category/missives.html">missives</a></li>
              <li><a href="./category/null.html">null</a></li>
          </ul>
  </section>
   

  <section>
  <h1>Tags</h1>
      <a href="./tag/undermythumb.html">undermythumb</a>,      <a href="./tag/finespecimen.html">finespecimen</a>,      <a href="./tag/butsaliwanaplayarya.html">butsaliwanaplayarya!</a>,      <a href="./tag/abwhofsabab.html">(a||b)whof***s(a||b||a&amp;b)</a>,      <a href="./tag/bothflamingandhot.html">bothflamingandhot</a>,      <a href="./tag/goingtwosiesonapadravya.html">goingtwosiesonapadravya</a>,      <a href="./tag/inscight.html">inscight</a>,      <a href="./tag/totallydisillusionedwithstraightmalehood.html">totallydisillusionedwithstraightmalehood</a>,      <a href="./tag/northofthewall.html">northofthewall</a>,      <a href="./tag/onatotallyunrelatednote.html">onatotallyunrelatednote</a>,      <a href="./tag/caith.html">caith</a>,      <a href="./tag/southside.html">southside</a>,      <a href="./tag/ifiwasgoingtokillmyselfiwouldnttellyou.html">ifiwasgoingtokillmyselfiwouldn'ttellyou</a>,      <a href="./tag/onedoesnotsimplyjumpingstilitsintomordor.html">onedoesnotsimplyjumpingstilitsintomordor</a>,      <a href="./tag/evilloknarisevil.html">evilloknarisevil</a>,      <a href="./tag/kdlang.html">kdlang</a>,      <a href="./tag/doyouhaveadorsalfin.html">doyouhaveadorsalfin?</a>,      <a href="./tag/paris.html">paris</a>,      <a href="./tag/forgottenfilmfriday.html">forgottenfilmfriday</a>,      <a href="./tag/kernelravego.html">kernelravego!</a>,      <a href="./tag/notmybrother.html">notmybrother</a>,      <a href="./tag/lolstice.html">lolstice</a>,      <a href="./tag/whatevs-oldladyhat.html">whatevs-oldladyhat</a>,      <a href="./tag/teaching.html">teaching</a>,      <a href="./tag/physor.html">physor</a>,      <a href="./tag/onlyonemanwoulddaregivemetheraspberry.html">onlyonemanwoulddaregivemetheraspberry</a>,      <a href="./tag/hardkour.html">hardkour</a>,      <a href="./tag/iheartvaginas.html">iheartvaginas</a>,      <a href="./tag/picsoritdidnthappen.html">picsoritdidnthappen</a>,      <a href="./tag/exodus.html">exodus</a>,      <a href="./tag/joinmyharem.html">joinmyharem</a>,      <a href="./tag/ladyjessica.html">ladyjessica</a>,      <a href="./tag/iamclearlynotdoingsomethingright.html">iamclearlynotdoingsomethingright</a>,      <a href="./tag/oldladyhat.html">oldladyhat</a>,      <a href="./tag/ssp.html">ssp</a>,      <a href="./tag/waitireallydolikeit.html">waitireallydolikeit</a>,      <a href="./tag/feyd.html">feyd</a>,      <a href="./tag/enigma.html">enigma</a>,      <a href="./tag/unicorn.html">unicorn</a>,      <a href="./tag/sequoia.html">sequoia</a>,      <a href="./tag/ssp2.html">ssp2</a>,      <a href="./tag/lollipop.html">lollipop</a>,      <a href="./tag/shebecrying.html">shebecrying</a>,      <a href="./tag/argentiniancowboys.html">argentiniancowboys</a>,      <a href="./tag/zomgspaceisradioactive.html">zOMGspaceisradioactive!</a>,      <a href="./tag/table4one.html">table4one</a>,      <a href="./tag/gundamisntfree.html">gundamisn'tfree</a>,      <a href="./tag/relenasbutler.html">relena'sbutler</a>,      <a href="./tag/unlessiaminasutriawhereitispunchandpie.html">unlessiaminasutriawhereitispunchandpie</a>,      <a href="./tag/duncanidaho.html">duncanidaho</a>,      <a href="./tag/peoplechangenawtheydont.html">peoplechangenawtheydont</a>,      <a href="./tag/lawlsadventure.html">lawlsadventure</a>,      <a href="./tag/no-utube.html">no-utube</a>,      <a href="./tag/ifoughtthelawandthelawanallyrapedme.html">ifoughtthelawandthelawanallyrapedme</a>,      <a href="./tag/5.html">+5</a>,      <a href="./tag/switzerland.html">switzerland</a>,      <a href="./tag/idontlikeitbecauseitispopular.html">idontlikeitbecauseitispopular</a>,      <a href="./tag/alittlebirdtoldme.html">alittlebirdtoldme</a>,      <a href="./tag/global.html">global</a>,      <a href="./tag/chc-everywhere.html">chc-everywhere!</a>    </section>

    
    <section>
        <h1>Social</h2>
        <ul>
            <li><a href="http://anthony.scopatz.com/" type="application/rss+xml" rel="alternate">RSS</a></li>
                    <li><a href="http://scopatz.com/" target="_blank">Other Website</a></li>
                    <li><a href="https://plus.google.com/u/0/116439624339414215461" target="_blank">Google+</a></li>
                    <li><a href="https://github.com/scopatz" target="_blank">GitHub</a></li>
                    <li><a href="https://bitbucket.org/scopatz" target="_blank">BitBucket</a></li>
                    <li><a href="https://twitter.com/scopatz" target="_blank">Twitter</a></li>
                    <li><a href="http://www.linkedin.com/in/scopatz" target="_blank">LinkedIn</a></li>
                </ul>
    </section>
  </aside>    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; Anthony Scopatz
</p></footer>
  	<script type="text/javascript">
	  var disqus_shortname = 'anthonyscopatz';
                var disqus_identifier = '/col-me-sometime-or-why-numpy-is-the-best-lover.html';
          var disqus_url = './col-me-sometime-or-why-numpy-is-the-best-lover.html';
          var disqus_title = 'Col Me Sometime (or Why NumPy is the Best&nbsp;Lover)';
      	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
</body>
</html>